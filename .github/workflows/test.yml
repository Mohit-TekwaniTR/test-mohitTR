name: Curl Test
on: [push]

jobs:
  test-curl:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Run Curl Command
        run: |
          export MY_PAT="${{ secrets.MY_PAT_TOKEN }}"
          echo "MY_PAT: ${{ secrets.MY_PAT_TOKEN }}"
          curl -v \
            -X POST \
            -H "Accept: application/vnd.github+json" \
            -H "Authorization: Bearer $MY_PAT" \
            -H "User-Agent: My-GitHub-Actions-Workflow"
            https://api.github.com/repos/mohit-tekwanitr/test-mohittr/codespaces \
            -d '{"ref":"main","machine":"standardLinux32gb"}'
